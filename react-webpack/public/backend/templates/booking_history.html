<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trang chủ người dùng</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/nav_bar.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/booking_history.css') }}"
    />
  </head>
  <body>
    <!-- nav bar -->
    <div class="navbar_ngang">
      <!-- logo + text -->
      <div class="logo-section">
        <img
          class="logo"
          src="{{ url_for('static', filename='images/icon_sports_soccer.png') }}"
        />
        <div class="logo-text">
          Sporty <br />
          Webby
        </div>
      </div>
      <!-- search -->
      <div class="search-container">
        <div class="search-box">
          <img
            class="search-icon"
            src="{{ url_for('static', filename='images/icon_search.png') }}"
          />
          <input type="text" class="search-input" placeholder="Search" />
          <button class="clear-btn">✖</button>
        </div>
        <script>
          const searchInput = document.querySelector(".search-input");
          const clearBtn = document.querySelector(".clear-btn");

          clearBtn.addEventListener("click", () => {
            searchInput.value = "";
            searchInput.focus();
          });
        </script>
      </div>
      <!-- Navigation Links -->
      <div class="nav-links">
        <a href="#" class="nav-item">Trang chủ</a>
        <a href="#" class="nav-item">Bạn bè</a>
        <a href="#" class="nav-item">Blog</a>
      </div>
      <!-- Profile Section -->
      <div class="profile-section">
        <div class="notification-icons">
          <!-- Bell icon for Notifications -->
          <div class="bell-icon">
            <img
              src="{{ url_for('static', filename='images/icon_noti.png') }}"
            />
          </div>
          <!-- Message box icon -->
          <div class="message-icon">
            <img
              src="{{ url_for('static', filename='images/icon_chat.png') }}"
            />
          </div>
        </div>
        <!-- Profile Info -->
        <div class="profile-info">
          <img
            class="profile-avatar"
            src="{{ url_for('static', filename='images/avatar.png') }}"
          />
          <div class="profile-name">
            <p>Trần Văn A</p>
            <p class="status">Trực tuyến</p>
          </div>
        </div>
        <!-- Arrow icon to toggle dropdown menu -->
        <div class="dropdown-arrow" onclick="toggleDropdown()">
          <img
            src="{{ url_for('static', filename='images/icon_arrow.png') }}"
          />
        </div>
        <!-- Dropdown menu -->
        <div class="dropdown-menu" id="dropdownMenu">
          <ul>
            <li><a href="#">Thông tin cá nhân</a></li>
            <li><a href="#">Lịch sử hoạt động</a></li>
            <li><a href="#">Bảo mật</a></li>
            <li><a href="#">Cài đặt</a></li>
            <li><a href="#">Năng suất</a></li>
          </ul>
        </div>
        <script>
          function toggleDropdown() {
            var dropdownMenu = document.getElementById("dropdownMenu");
            dropdownMenu.style.display =
              dropdownMenu.style.display === "block" ? "none" : "block";
          }
        </script>
      </div>
    </div>
    <div class="main-container">
      <!-- side bar -->
      <div class="sidebar">
        <div class="menu-item">
          <div class="icon">
            <img
              src="{{ url_for('static', filename='images/icon_dashboard.png') }}"
            />
          </div>
          <div class="text">Bảng điều khiển</div>
        </div>
        <div class="menu-item">
          <div class="icon">
            <img
              src="{{ url_for('static', filename='images/icon_book_field.png') }}"
            />
          </div>
          <div class="text">Đặt sân</div>
        </div>
        <div class="menu-item">
          <div class="icon">
            <img
              src="{{ url_for('static', filename='images/icon_history_book_field.png') }}"
              class="abc"
            />
          </div>
          <div class="text">Lịch sử đặt sân</div>
        </div>
        <div class="menu-item">
          <div class="icon">
            <img
              src="{{ url_for('static', filename='images/icon_deposit.png') }}"
            />
          </div>
          <div class="text">Nạp tiền</div>
        </div>
        <div class="menu-item">
          <div class="icon">
            <img
              src="{{ url_for('static', filename='images/icon_payment_history.png') }}"
            />
          </div>
          <div class="text">Lịch sử giao dịch</div>
        </div>
      </div>
      <!-- lịch sử đặt sân -->
      <div class="content-container">
        <h2>Lịch sử đặt sân</h2>
        <div class="balance">
          Số dư: <span class="balance-amount">125.000 VND</span>
        </div>
        <!-- Khung tìm kiếm và lọc -->
        <div class="filter-section">
          
          <input type="date" id="start-date" />

          <label for="end-date">đến</label>
          <input type="date" id="end-date" />

          <input
            type="text"
            id="search-bar"
            placeholder="Tìm kiếm theo tên sân"
          />

          <button class="filter-btn" onclick="filterTable()">Lọc</button>
        </div>

        <table class="booking-table" id="bookingTable">
          <thead>
            <tr>
              <th>Mã đặt sân</th>
              <th>Ngày và Giờ</th>
              <th>Tên sân</th>
              <th>Loại sân</th>
              <th>Số tiền thanh toán</th>
              <th>Ghi chú Giao dịch</th>
              <th>Phương thức Thanh toán</th>
              <th>Trạng thái</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>001234</td>
              <td>2024-11-25 07:00</td>
              <td>Sân A</td>
              <td>Sân cầu lông</td>
              <td>100K VND</td>
              <td>Không có ghi chú</td>
              <td>Momo</td>
              <td class="status">Hoàn thành</td>
            </tr>
            <tr>
              <td>001235</td>
              <td>2024-11-23 08:00</td>
              <td>Sân B</td>
              <td>Sân bóng đá</td>
              <td>50K VND</td>
              <td>Không có ghi chú</td>
              <td>Thẻ tín dụng</td>
              <td class="status">Hoàn thành</td>
            </tr>
            <tr>
              <td>001236</td>
              <td>2024-11-24 9:00</td>
              <td>Sân C</td>
              <td>Sân bóng rổ</td>
              <td>80K VND</td>
              <td>Không có ghi chú</td>
              <td>Paypal</td>
              <td class="status">Hoàn thành</td>
            </tr>
            <tr>
              <td>001237</td>
              <td>2024-11-18 10:00</td>
              <td>Sân D</td>
              <td>Sân bóng chuyền</td>
              <td>90K VND</td>
              <td>Không có ghi chú</td>
              <td>Thẻ tín dụng</td>
              <td class="status">Hoàn thành</td>
            </tr>
          </tbody>
        </table>

        <div class="pagination">
          <button class="page-btn">&laquo;</button>
          <button class="page-btn active">1</button>
          <button class="page-btn">2</button>
          <button class="page-btn">3</button>
          <button class="page-btn">&raquo;</button>
        </div>
      </div>
    </div>
    <script>
      function filterTable() {
        const searchInput = document
          .getElementById("search-bar")
          .value.toLowerCase();
        const startDate = document.getElementById("start-date").value;
        const endDate = document.getElementById("end-date").value;
        const tableRows = document.querySelectorAll("#bookingTable tbody tr");

        tableRows.forEach((row) => {
          const rowText = row.textContent.toLowerCase();
          const date = row.children[1].textContent.split(" ")[0]; // Lấy ngày từ cột ngày giờ
          const fieldName = row.children[2].textContent.toLowerCase(); // Lấy Tên sân từ cột thứ 3

          const dateValid =
            (!startDate || date >= startDate) && (!endDate || date <= endDate);
          const searchValid =
            rowText.includes(searchInput) || fieldName.includes(searchInput); // Tìm trong cả row hoặc tên sân

          if (dateValid && searchValid) {
            row.style.display = "";
          } else {
            row.style.display = "none";
          }
        });
      }
    </script>
  </body>
</html>
